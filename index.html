<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ganadero B&M</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --verde:#1f7a5a;
  --gris:#f3f5f7;
  --oscuro:#1e1e1e;
  --borde:#dcdcdc;
}

body{
  margin:0;
  font-family: system-ui, Segoe UI, Roboto, Arial;
  background:var(--gris);
}

/* ===== LAYOUT ===== */
.app{
  display:flex;
  height:100vh;
}

/* ===== MENU ===== */
.menu{
  width:220px;
  background:#ffffff;
  border-right:1px solid var(--borde);
  padding:20px 0;
}

.menu h1{
  font-size:18px;
  text-align:center;
  margin-bottom:30px;
  color:var(--verde);
}

.menu button{
  display:block;
  width:100%;
  padding:12px 20px;
  border:none;
  background:none;
  text-align:left;
  font-size:15px;
  cursor:pointer;
}

.menu button:hover{
  background:#eef3f1;
}

/* ===== CONTENT ===== */
.content{
  flex:1;
  padding:25px;
  overflow:auto;
}

.section{
  background:#fff;
  border-radius:14px;
  padding:20px;
  margin-bottom:20px;
  border:1px solid var(--borde);
}

h2{
  margin-top:0;
  color:var(--verde);
}

/* ===== FORM ===== */
input, select{
  width:100%;
  padding:10px;
  margin-top:6px;
  margin-bottom:12px;
  border-radius:8px;
  border:1px solid var(--borde);
  font-size:14px;
}

button.primary{
  background:var(--verde);
  color:#fff;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

/* ===== CARDS ===== */
.card{
  border:1px solid var(--borde);
  border-radius:12px;
  padding:15px;
  cursor:pointer;
}
.card:hover{
  background:#f6faf8;
}
.small{
  font-size:13px;
  color:#666;
}
</style>
</head>

<body>

<div class="app">

  <!-- MENU -->
  <div class="menu">
    <h1>Ganadero B&M</h1>
    <button onclick="vista('inicio')">Inicio</button>
    <button onclick="vista('animales')">Animales</button>
    <button>Salud</button>
    <button>Reproducción</button>
    <button onclick="vista('config')">Configuración</button>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- INICIO -->
    <div id="inicio" class="section">
      <h2>Inicio</h2>

      <label>Seleccionar rodeo</label>
      <select id="rodeoSelect" onchange="mostrarResumen()"></select>

      <div class="grid" id="resumen"></div>
    </div>

    <!-- ANIMALES -->
    <div id="animales" class="section" style="display:none">
      <h2>Animales del rodeo</h2>
      <div id="listaAnimales"></div>
    </div>

    <!-- CONFIG -->
    <div id="config" class="section" style="display:none">
      <h2>Configuración</h2>

      <label>Establecimiento</label>
      <input id="establecimiento">

      <button class="primary" onclick="guardarConfig()">Guardar</button>
    </div>

  </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem("ganaderoBM")) || {
  establecimiento:"",
  lotes:["Lote 1","Lote 2"],
  rodeos:[
    {nombre:"Rodeo A", lote:"Lote 1", animales:[]}
  ]
};

function save(){
  localStorage.setItem("ganaderoBM", JSON.stringify(data));
}

/* ===== VISTAS ===== */
function vista(id){
  ["inicio","animales","config"].forEach(v=>{
    document.getElementById(v).style.display="none";
  });
  document.getElementById(id).style.display="block";
}

/* ===== CONFIG ===== */
establecimiento.value=data.establecimiento;

function guardarConfig(){
  data.establecimiento=establecimiento.value;
  save();
  alert("Guardado");
}

/* ===== INICIO ===== */
function cargarRodeos(){
  rodeoSelect.innerHTML="";
  data.rodeos.forEach((r,i)=>{
    rodeoSelect.innerHTML+=`<option value="${i}">${r.nombre}</option>`;
  });
}
cargarRodeos();

function mostrarResumen(){
  let r=data.rodeos[rodeoSelect.value];
  let vacas=r.animales.filter(a=>a.tipo=="Vaca").length;
  let toros=r.animales.filter(a=>a.tipo=="Toro").length;
  let terneros=r.animales.filter(a=>a.tipo=="Ternero").length;

  resumen.innerHTML=`
    <div class="card" onclick="listar('Vaca')">
      <b>Vacas</b><br>${vacas}
    </div>
    <div class="card" onclick="listar('Toro')">
      <b>Toros</b><br>${toros}
    </div>
    <div class="card" onclick="listar('Ternero')">
      <b>Terneros</b><br>${terneros}
    </div>
    <div class="card">
      <b>Lote</b><br>${r.lote}
    </div>
  `;
}
mostrarResumen();

/* ===== LISTADO ===== */
function listar(tipo){
  vista("animales");
  let r=data.rodeos[rodeoSelect.value];
  listaAnimales.innerHTML="";
  r.animales.filter(a=>a.tipo==tipo).forEach(a=>{
    listaAnimales.innerHTML+=`
      <div class="card">
        <b>${a.caravana}</b><br>
        ${a.sexo} - ${a.color}
      </div>
    `;
  });
}
</script>

</body>
</html>
